<pre><font color="#007f69">breed</font><font color="#000000"> [rabbits rabbit]<br /></font><font color="#007f69">rabbits-own</font><font color="#000000"> [energy gender sick-ticks is-sick?]<br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br />  grow-grass-and-weeds<br />  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> rabbits </font><font color="#963700">&quot;rabbit&quot;</font><font color="#000000"><br />  create-rabbits number [<br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000">  </font><font color="#5a5a5a">; start with a random amount of energy</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> gender </font><font color="#660096">one-of</font><font color="#000000"> [</font><font color="#963700">&quot;male&quot;</font><font color="#000000"> </font><font color="#963700">&quot;female&quot;</font><font color="#000000">]  </font><font color="#5a5a5a">; assign random gender</font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;male&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> ]<br />    </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;female&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">pink</font><font color="#000000"> ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> is-sick? </font><font color="#963700">false</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> sick-ticks </font><font color="#963700">0</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> rabbits [ </font><font color="#0000aa">stop</font><font color="#000000"> ]<br />  grow-grass-and-weeds<br />  </font><font color="#0000aa">ask</font><font color="#000000"> rabbits [<br />    </font><font color="#0000aa">if</font><font color="#000000"> is-sick? [<br />      stay-sick<br />    ] <br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> is-sick? [<br />      move <br />      eat-grass<br />      eat-weeds<br />      reproduce<br />      death<br />    ]<br />  ]<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> grow-grass-and-weeds<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [<br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"> [<br />      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1000</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> grass-grow-rate [<br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"><br />      ]<br />    ]<br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> [<br />      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1000</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> weeds-grow-rate [<br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">violet</font><font color="#000000"><br />      ]<br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move  </font><font color="#5a5a5a">;; rabbit procedure</font><font color="#000000"><br />  </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />  </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />  </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> eat-grass  </font><font color="#5a5a5a">;; rabbit procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">+</font><font color="#000000"> grass-energy<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> eat-weeds  </font><font color="#5a5a5a">;; rabbit procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">violet</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> poison-chance [<br />      </font><font color="#0000aa">set</font><font color="#000000"> is-sick? </font><font color="#963700">true</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">  </font><font color="#5a5a5a">; change color to indicate sickness</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> sick-ticks </font><font color="#963700">3</font><font color="#000000">  </font><font color="#5a5a5a">; remain sick for 3 ticks</font><font color="#000000"><br />    ] <br />     </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> is-sick? [<br />      </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">+</font><font color="#000000"> weed-energy<br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> reproduce  </font><font color="#5a5a5a">;; rabbit procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> energy </font><font color="#660096">&gt;</font><font color="#000000"> birth-threshold </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> is-sick? [<br />    </font><font color="#0000aa">let</font><font color="#000000"> partner </font><font color="#660096">one-of</font><font color="#000000"> rabbits-here </font><font color="#660096">with</font><font color="#000000"> [gender </font><font color="#660096">!=</font><font color="#000000"> [gender] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> energy </font><font color="#660096">&gt;</font><font color="#000000"> birth-threshold </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> is-sick?]<br />    </font><font color="#0000aa">if</font><font color="#000000"> partner </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"> [<br />      </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"><br />      </font><font color="#0000aa">ask</font><font color="#000000"> partner [ </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]<br />      </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />        </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> gender </font><font color="#660096">one-of</font><font color="#000000"> [</font><font color="#963700">&quot;male&quot;</font><font color="#000000"> </font><font color="#963700">&quot;female&quot;</font><font color="#000000">]<br />        </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;male&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> ]<br />        </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;female&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">pink</font><font color="#000000"> ]<br />        </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />      ]<br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> stay-sick<br />  </font><font color="#0000aa">set</font><font color="#000000"> sick-ticks sick-ticks </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> sick-ticks </font><font color="#660096">&lt;=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> is-sick? </font><font color="#963700">false</font><font color="#000000"><br />     </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;male&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> ]<br />     </font><font color="#0000aa">if</font><font color="#000000"> gender </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;female&quot;</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">pink</font><font color="#000000"> ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> death  </font><font color="#5a5a5a">;; rabbit procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> energy </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ </font><font color="#0000aa">die</font><font color="#000000"> ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /></font>
</pre>
